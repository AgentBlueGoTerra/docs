(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{443:function(e,t,a){"use strict";a.r(t);var s=a(5),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),a("p",[e._v("Here are some common problems that you may run into when running a validator node.")]),e._v(" "),a("h2",{attrs:{id:"validator-has-0-voting-power"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validator-has-0-voting-power"}},[e._v("#")]),e._v(" Validator has 0 voting power")]),e._v(" "),a("p",[e._v("Your validator has become auto-unbonded. In mainnet and testnet, we unbond validators if they do not vote on "),a("code",[e._v("50")]),e._v(" of the last "),a("code",[e._v("100")]),e._v(" blocks. Since blocks are proposed every ~2 seconds, a validator unresponsive for ~100 seconds will become unbonded. This usually happens when your "),a("code",[e._v("terrad")]),e._v(" process crashes.")]),e._v(" "),a("p",[e._v("Here's how you can return the voting power back to your validator. First, if "),a("code",[e._v("terrad")]),e._v(" is not running, start it up again:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terrad start\n")])])]),a("p",[e._v("Wait for your full node to catch up to the latest block. Next, run the following command. Note that "),a("code",[e._v("<terra>")]),e._v(" is the address of your validator account, and "),a("code",[e._v("<name>")]),e._v(" is the name of the validator account. You can find this info by running "),a("code",[e._v("terracli keys list")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terracli tx slashing unjail "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("terra"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --from"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("from"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("If you don't wait for "),a("code",[e._v("terrad")]),e._v(" to sync before running "),a("code",[e._v("unjail")]),e._v(", you will receive an error message telling you your validator is still jailed.")])]),e._v(" "),a("p",[e._v("Lastly, check your validator again to see if your voting power is back.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("terracli status\n")])])]),a("p",[e._v("You may notice that your voting power is less than it used to be. That's because you got slashed for downtime!")]),e._v(" "),a("h2",{attrs:{id:"terrad-crashes-from-too-many-open-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terrad-crashes-from-too-many-open-files"}},[e._v("#")]),e._v(' terrad crashes from "too many open files"')]),e._v(" "),a("p",[e._v("The default number of files Linux can open (per-process) is "),a("code",[e._v("1024")]),e._v(". "),a("code",[e._v("terrad")]),e._v(" is known to open more than "),a("code",[e._v("1024")]),e._v(" files. This causes the process to crash. A quick fix is to run "),a("code",[e._v("ulimit -n 4096")]),e._v(" (increase the number of open files allowed) and then restart the process with "),a("code",[e._v("terrad start")]),e._v(". If you are using "),a("code",[e._v("systemd")]),e._v(" or another process manager to launch "),a("code",[e._v("terrad")]),e._v(" this may require some configuration at that level. A sample "),a("code",[e._v("systemd")]),e._v(" file to fix this issue is below:")]),e._v(" "),a("div",{staticClass:"language-systemd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# /etc/systemd/system/terrad.service\n[Unit]\nDescription=Terra Columbus Node\nAfter=network.target\n\n[Service]\nType=simple\nUser=ubuntu\nWorkingDirectory=/home/ubuntu\nExecStart=/home/ubuntu/go/bin/terrad start\nRestart=on-failure\nRestartSec=3\nLimitNOFILE=4096\n\n[Install]\nWantedBy=multi-user.target\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);